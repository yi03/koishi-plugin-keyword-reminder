# Koishi 关键词提醒插件 (keyword-reminder)

[![npm](https://img.shields.io/npm/v/koishi-plugin-keyword-reminder?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-keyword-reminder)


## 简介

本插件允许用户在 Koishi 机器人上设置关键词提醒。当指定群聊或所有共同群聊中出现您设置的关键词时，机器人会通过**私聊**向您发送通知。

此外，插件还特别加入了**忽略用户**功能：您可以指定忽略某些用户，被忽略用户发送的消息（即使包含您设置的关键词）将**不会**触发您的提醒。这对于屏蔽机器人账号或其他不想接收其消息触发的提醒非常有用。

本插件基于 [fei-keyword-reminder](https://github.com/WhySoRed/koishi-plugin-fei-keyword-reminder) 插件开发，添加了忽略用户功能。

## 命令 / 使用说明

以下是插件提供的命令列表及其用法：

*   **`提醒`**
    *   作用：显示插件的帮助信息和命令列表。
    *   示例：`提醒`

*   **`提醒.群提醒 <关键词> [群号]`**
    *   作用：在指定的群聊中为你设置一个关键词提醒。
    *   参数：
        *   `<关键词>`：必须，你想要监听的关键词。
        *   `[群号]`：可选，目标群聊的 ID。如果省略，则默认为**当前群聊**。
    *   注意：此命令不能在私聊中省略群号使用。
    *   示例 1：在当前群聊设置关键词 "koishi" 的提醒：`提醒.群提醒 koishi`
    *   示例 2：在群 `12345678` 设置关键词 "插件更新" 的提醒：`提醒.群提醒 插件更新 12345678`

*   **`提醒.全局提醒 <关键词>`**
    *   作用：在你和机器人所在的所有共同群聊中设置一个关键词提醒。
    *   参数：
        *   `<关键词>`：必须，你想要监听的关键词。
    *   示例：`提醒.全局提醒 新公告`

*   **`提醒.删除 <要删除的关键词> [群号]`**
    *   作用：删除你设置的某个关键词提醒。
    *   参数：
        *   `<要删除的关键词>`：必须，之前设置的关键词。
        *   `[群号]`：可选，指定要删除提醒的群聊 ID。
            *   如果**省略**群号并在**群聊中**使用，则删除当前群聊的该关键词提醒。
            *   如果**省略**群号并在**私聊中**使用，则删除该关键词的**全局提醒**及其关联的所有群聊提醒。
            *   如果**提供**群号，则删除指定群聊的该关键词提醒。
    *   示例 1：删除当前群聊的 "koishi" 提醒：`提醒.删除 koishi`
    *   示例 2：删除群 `12345678` 的 "插件更新" 提醒：`提醒.删除 插件更新 12345678`
    *   示例 3：在私聊中删除全局提醒 "新公告"：`提醒.删除 新公告`

*   **`提醒.列表`**
    *   作用：查看你自己设置的所有关键词提醒列表，会显示关键词及其生效范围（全局或具体群聊）。
    *   示例：`提醒.列表`

*   **`提醒.忽略 <用户>`**
    *   作用：将指定用户添加到当前机器人的提醒忽略列表。来自该用户的消息将不再触发你的任何关键词提醒。
    *   参数：
        *   `<用户>`：必须，可以是 **@提及用户** 或直接提供 **用户ID**。
    *   注意：不能忽略自己或机器人本身。
    *   示例 1：忽略 @张三：`提醒.忽略 @张三`
    *   示例 2：忽略用户 ID `987654321`：`提醒.忽略 987654321`

*   **`提醒.取消忽略 <用户>`**
    *   作用：将指定用户从当前机器人的提醒忽略列表中移除。
    *   参数：
        *   `<用户>`：必须，可以是 **@提及用户** 或直接提供 **用户ID**。
    *   示例 1：取消忽略 @张三：`提醒.取消忽略 @张三`
    *   示例 2：取消忽略用户 ID `987654321`：`提醒.取消忽略 987654321`

*   **`提醒.忽略列表`**
    *   作用：查看当前机器人实例的忽略用户列表（会尝试显示用户名和用户ID）。
    *   示例：`提醒.忽略列表`

## 注意事项

1.  **私聊权限**：提醒是通过私聊发送的。请确保机器人有权限向你发送私聊消息（例如，已添加好友，或检查平台的隐私设置），否则你将无法收到提醒，并且在设置时可能会收到相关错误提示。
2.  **忽略范围**：用户忽略列表是 **针对当前机器人实例** 生效的。如果你在多个不同的机器人上都使用了此插件，它们的忽略列表是相互独立的。
3.  **关键词匹配**：当前实现是检查消息内容是否 `包含` 指定的关键词。如果一条消息包含多个你设置的关键词，目前只会触发**第一个**匹配到的关键词的提醒。
